// Generated by CoffeeScript 1.6.2
(function() {
  var arrows, preventScrolling;

  preventScrolling = function(e) {
    var _ref;

    if ((arrows.left <= (_ref = e.keyCode) && _ref <= arrows.down)) {
      return e.preventDefault();
    }
  };

  arrows = {
    left: 37,
    up: 38,
    right: 39,
    down: 40
  };

  window.u_s = 0;

  window.u_phi = 0;

  app.on('keydown', function(e) {
    preventScrolling(e);
    switch (e.keyCode) {
      case arrows.up:
        return window.u_s = config.speed();
      case arrows.down:
        return window.u_s = -config.speed();
      case arrows.left:
        return window.u_phi = Math.min(window.u_phi + config.steeringRate(), config.steer());
      case arrows.right:
        return window.u_phi = Math.max(window.u_phi - config.steeringRate(), -config.steer());
    }
  });

  app.on('keyup', function(e) {
    preventScrolling(e);
    switch (e.keyCode) {
      case arrows.up:
      case arrows.down:
        return window.u_s = 0;
    }
  });

  window.frameRate = {
    lastTime: +(new Date),
    frames: 0,
    i: 0,
    draw: function() {
      var d, now;

      now = +(new Date);
      d = 1000 / (now - this.lastTime + 1);
      this.frames += d;
      this.lastTime = now;
      if (this.i++ >= 10) {
        config.frameRate((this.frames / this.i).toFixed(0));
        this.i = 0;
        return this.frames = 0;
      }
    }
  };

}).call(this);
